server:
    port: ${SERVER_PORT:9526}
    servlet:
      context-path: /dream-mgt-api/
      encoding:
        enabled: true
        force: true
        charset: UTF-8

dream:
  auth:
    server:
      scheme: http
      base-domain: ${SERVER_DOMAIN:dream.top}
      domain: sso.${dream.auth.server.basedomain}
      name: ${dream.auth.server.scheme}://${dream.auth.server.domain}
      uri: ${dream.auth.server.name}:${server.port}${server.servlet.context-path}
      default-uri: ${dream.auth.server.uri}/main
      mgt-uri: ${dream.auth.server.uri}
      authz-uri: https://${dream.auth.server.domain}/dream
      provision: ${SERVER_PROVISION:false}
    jwk:
      issuer: ${dream.auth.server.uri}
      expires: 900
      secret: 7heM-14BtxjyKPuH3ITIm7q2-ps5MuBirWCsrrdbzzSAOuSPrbQYiaJ54AeA0uH2XdkYy3hHAkTFIsieGkyqxOJZ_dQzrCbaYISH9rhUZAKYx8tUY0wkE4ArOC6LqHDJarR6UIcMsARakK9U4dhoOPO1cj74XytemI-w6ACYfzRUn_Rn4e-CQMcnD1C56oNEukwalf06xVgXl41h6K8IBEzLVod58y_VfvFn-NGWpNG0fy_Qxng6dg8Dgva2DobvzMN2eejHGLGB-x809MvC4zbG7CKNVlcrzMYDt2Gt2sOVDrt2l9YqJNfgaLFjrOEVw5cuXemGkX1MvHj6TAsbLg
      refresh-secret: 7heM-14BtxjyKPuH3ITIm7q2-ps5MuBirWCsrrdbzzSAOuSPrbQYiaJ54AeA0uH2XdkYy3hHAkTFIsieGkyqxOJZ_dQzrCbaYISH9rhUZAKYx8tUY0wkE4ArOC6LqHDJarR6UIcMsARakK9U4dhoOPO1cj74XytemI-w6ACYfzRUn_Rn4e-CQMcnD1C56oNEukwalf06xVgXl41h6K8IBEzLVod58y_VfvFn-NGWpNG0fy_Qxng6dg8Dgva2DobvzMN2eejHGLGB-x809MvC4zbG7CKNVlcrzMYDt2Gt2sOVDrt2l9YqJNfgaLFjrOEVw5cuXemGkX1MvHj6TAsbLg
    login:
      captcha: 
        enabled: ${LOGIN_CAPTCHA:true}
      mfa: 
        enabled: false
      ws-federation: 
        enabled: false
      remember-me: false
      remember-me-validity: 0
      kerberos: 
        enabled: false
      jwt:
        enabled: ${LOGIN_JWT:true}
        issuer: ${LOGIN_JWT_ISSUER:${dream.server.authz.uri}}
    ip:
      white: false
    otp:
      policy:
        type: totp
        digits: 6
        issuer: ${OTP_POLICY_ISSUER:dream}
        domain: ${dream.server.domain}
        period: 30
    oidc:
      metadata:
        issuer: ${dream.server.authz.uri}
        authorizationEndpoint: ${dream.server.authz.uri}/authz/oauth/v20/authorize
        tokenEndpoint: ${dream.server.authz.uri}/authz/oauth/v20/token
        userinfoEndpoint: ${dream.server.authz.uri}/api/connect/userinfo
    saml:
      max-parser-pool-size: 2
      replay:
        cache-life-in-millis: 14400000
      metadata:
        org-name: dreamTop
        org-display-name: dreamTop
        org-url: https://www.dream.top
        contact-type: technical
        company: dreamTop
        given-name: dream
        sur-name: dream
        email: mygodness30@sina.com
        phone-number: 4008981111
      idp:
        issuer: ${dream.server.authz.uri}/saml
        receiver-endpoint: https://sso.dream.top/
#        keystore: classpath:config/samlServerKeystore.jks
        issuing-entity-id: dream.top
      issue:
          instant-check-clock-skew-in-seconds: 90
          instant-check-validity-time-in-seconds: 300
      assertion:
        validity-time-in-seconds: 90
      sp:
#        keystore: classpath:config/samlClientKeystore.jks
        issuing-entity-id: client.dream.org
    job:
      cron:
        enabled: true
        schedule: 0 0 0/1 * * ?
    swagger:
      enabled: true
      title: 单点登录认证系统API文档
      description: 单点登录认证系统API文档
      version: ${dream.auth.app.version}
    mybatis:
      dialect: mysql
      table-column-snowflake-datacenter-id: 1
      table-column-snowflake-machine-id: 1

spring:
  servlet:
    multipart:
      enabled: true
      max-file-size: 4194304

  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${DATABASE_USER:root}
    password: ${DATABASE_PWD:123456}
    url: jdbc:mysql://${DATABASE_HOST:localhost}:${DATABASE_PORT:3306}/${DATABASE_NAME:dream_auth}?autoReconnect=true&characterEncoding=UTF-8&serverTimezone=UTC

  redis:
    host: ${REDIS_HOST:127.0.0.1}
    port: ${REDIS_PORT:6379}
    password: ${REDIS_PWD:password}
    timeout: 10000
    jedis:
      pool:
        max-wait: 1000
        max-idle: 200
    lettuce:
      pool:
        max-active: -1
        min-idle: 0

  mail:
    default-encoding: utf-8
    host: ${MAIL_HOST:smtp.163.com}
    port: ${MAIL_PORT:465}
    username: ${MAIL_USER:dream@163.com}
    password: ${MAIL_PWD:password}
    protocol: smtp
    properties:
      ssl: true
      sender: ${MAIL_SENDER:dream@163.com}
      mailotp:
        message:
        subject: Dream One Time PassWord
        template: "{0} You Token is {1} , it validity in {2}  minutes."
        type: html
        validity: 300

  boot:
    admin:
      client:
        enabled: ${SPRING_BOOT_ADMIN_ENABLED:false}
        url: ${SPRING_BOOT_ADMIN_URL:http://127.0.0.1:9528}
        username: ${SPRING_BOOT_ADMIN_USERNAME:}
        password: ${SPRING_BOOT_ADMIN_PASSWORD:}

  freemarker:
    template-loader-path: classpath:/templates/views
    cache: false
    charset: UTF-8
    check-template-location: true
    content-type: text/html
    expose-request-attributes: false
    expose-session-attributes: false
    request-context-attribute: request
    suffix: .ftl


mybatis-plus:
    type-aliases-package: com.wy.test.core.entity,com.wy.test.core.vo,com.wy.test.core.query
    mapper-locations: classpath*:mapper/*.xml

management:
  endpoints:
    web:
      exposure:
        include: "*"
    jmx:
      exposure:
        include:
        - health
        - info
  endpoint:
    health:
      show-details: ALWAYS
  health:
      redis:
        enabled: false
      mail:
        enabled: false

springdoc:
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha
    show-extensions: true
  api-docs:
    path: /v3/api-docs
  group-configs: 
    - group: default
      paths-to-match: /*
      packages-to-scan: com.wy.test
knife4j:
  enable: true
  setting:
      language: zh_cn
      swagger-model-name: "实体类列表"